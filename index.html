<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
  </head>
  <body>
    <style>
      body {
        padding: 20px;
      }
      .leaflet-container {
        height: 400px;
        width: 80%;
        margin: 0 auto;
      }
    </style>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
    <script src="https://unpkg.com/react-leaflet@next/dist/react-leaflet.min.js"></script>
    <script src="./reactive-elements.min.js"></script>
    <script type="text/javascript" src="app.js"></script>

    <script type="text/javascript">
      const app = Elm.Main.fullscreen()
      const h = React.createElement
      const Leaflet = window.ReactLeaflet

      document.registerReact('leaflet-map', class extends React.Component {
        constructor(props) {
          super(props)
          this.state = {
            lat: 51.505,
            lng: -0.09,
            zoom: 13,
          }
        }

        render() {
          const position = [this.state.lat, this.state.lng]

          return h(Leaflet.Map, { center: position, zoom: this.state.zoom }, [
            h(Leaflet.TileLayer, {
              key: 'tile',
              attribution: '&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors',
              url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
            }, []),
            h(Leaflet.Marker, { key: 'marker', position: position }, [
              h(Leaflet.Popup, {}, 'A pretty CSS3 popup. Easily customizable.')
            ])
          ])
        }
      })

    </script>
  </body>
</html>
